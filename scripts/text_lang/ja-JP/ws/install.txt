<h1>インストール/アンインストール</h1>

<h3>最小システム要件</h3>
<ul><li><strong>オペレーティングシステム：</strong>
	<ul><li>Linux(i386): カーネル 2.4以上, glibc-2.2以上</li>
		<li>CentOS: 5以上</li>
		<li>Ubuntu: 8.04以上</li>
        <li>Debian: 4以上</li>
		<li>Solaris(x86): Sun0S 5.8以上</li>
		<li>FreeBSD(i386): 4.5以上</li>
		<li>MacOSX: 10.3以上</li>
	</ul></li>
	<li><strong>CPU:</strong>
		<ul><li>Intel: 80486以上</li>
			<li>PowerPC: PowerPC G4</li>
		</ul>
	</li>
	<li><strong>メモリ:</strong> 32MB以上</li>
	<li><strong>ディスク:</strong>
		<ul><li>インストール: 200MB</li><li>ランタイム: 300MB以上、スワップスペースは使用方法によって異なります。</li></ul></li>
</ul>

<h3>インストール</h3>

<p>インストールはコマンドライン端末で行う必要があります。 
   テストの目的で、LiteSpeed Web Serverは特権のないユーザーによってホームディレクトリにインストールできます。 
   プロダクション用には、システムディレクトリにインストールする必要があります。</p>

<p>Mac OS Xでは、rootユーザーはデフォルトで無効になっています。
<a href="http://support.apple.com/kb/PH11331">Apple</a>のウェブサイトに記載されている一連の操作を使用して有効にすることができます。
sudoコマンドを使用して、rootユーザーを有効にせずにLSWSをシステムディレクトリにインストールすることもできますが、システムフォルダはrootユーザーだけが操作できます。
つまり、コマンドライン端末からLSWSを制御したいとき（LSWSを起動または停止したいときなど）には、sudoコマンドを使用する必要があります。</p>

<h4>インストール手順：</h4>
<ol>

  <li> 便利な場所にパッケージを解凍する：<br>
    <span class="cmd">tar xvfz lsws-xxxx.tar.gz</span> 又は <span class="cmd">gunzip 
    -c lsws-xxxx.tar.gz | tar xvf -</span> <br>
  </li>
  <li><span class="tag">[Enterpriseエディションのみ]</span> トライアルライセンスキーまたはシリアル番号をインストールします：
    <ul>
      <li> トライアルライセンス： 
           <p>トライアルライセンスは評価のためのもので、ダウンロード後15日間有効です。
              トライアルライセンスは、ダウンロードページからリクエストできます。</p>
           <p>試用ライセンスキーが確認メールの添付ファイルとして送信されます。 
           添付ファイルを<span class="val">trial.key</span>として保存し、インストールディレクトリにコピーしてください。</p>
           <p>トライアルライセンスからプロダクションライセンスに切り替えるときは、以下の手順に従ってライセンスを更新するだけで、インストールスクリプトを再実行することができます。</p>
      </li>
      <li> プロダクションライセンス：
        <ol>
          <li> ライセンスはLiteSpeedの<a href="http://store.litespeedtech.com">ストアー</a>でリースまたは購入することができます 。</li>
          <li> 注文が正常に処理された後、確認メールでシリアル番号が送信されます。
               各シリアル番号により、1台のサーバーのインストールが可能です。</li>
          <li> シリアル番号を "serial.no"として保存します。 インストールディレクトリ（install.shが置かれている場所）にあります。
               LiteSpeed製品登録サーバーは、このファイルを使用して、インストールプロセス中にライセンスキーを取得します。</li>
        </ol>        
		</li>
    </ul>
  </li>
  <li> 
   <p>インストールディレクトリ<span class="cmd">cd lsws-xxxx</span>に移動し、<span class="cmd">./install.sh</span>コマンドを実行します。
    LiteSpeedのインストーラが起動します。</p>
    <p>このコマンドを &quot;root&quot;ユーザーとして実行するだけで、サーバーをシステムディレクトリにインストールできることに注意してください。
    他のユーザーは、ホームディレクトリの下のどこかにインストールする必要があります。</p>
    <p>Mac OS Xユーザーはコマンドを使用してサーバーをシステムディレクトリにインストールできます 
  <span class="cmd">sudo ./install.sh</span></p>
  </li>
  
  <li> エンドユーザー使用許諾契約書を読み、"Yes"と入力して契約を確認します。</li>
  
  <li>LiteSpeed Web Serverをインストールするディレクトリを指定します。
    rootユーザーの場合、デフォルトは/usr/local/lswsです。
    特権を持たないユーザーの場合、デフォルトはホームディレクトリです。 
    特権を持たないユーザーは、サーバーをシステムディレクトリにインストールすることはできません。</li>
   
  <li><span class="tag">[Enterpriseエディションのみ]</span> <strong>ライセンス要求を生成します。</strong>
    <p>インストーラがシリアル番号だけを検索し、有効なライセンスキーが見つからない場合は、ライセンス要求の生成を促します。
     インストーラはLiteSpeed製品登録サーバーと通信し、有効なライセンスキーを自動的に取得します。
     ライセンスキーを取得すると、次のステップに進みます。
     失敗した場合、インストーラは終了してライセンス要求ファイルを残します。</p>
    <p>自動処理が失敗した場合は、オンラインストアクライアントエリアのライセンス部門でチケットを作成することができます。</p>  
    <p>注：インストールは、有効な試用版ライセンスまたは有効なエンタープライズライセンスがある場合にのみ継続されます。 </p>
   </li>

    <li>画面の指示に従います。インストーラは、次の設定を要求します： 
    <ol>
      <li> 以前にインストールされたコピーが存在する場合、インストーラはアップグレード、再インストール、またはディレクトリの変更のいずれかを選択するように求めます。
           アップグレードすると、現在の設定が保持されます。</li>
      <li> WebAdminインターフェイスの管理者のユーザー名とパスワード。</li>
      <li> コントロールパネルがあればLSWSで使用。</li>
      <li> サーバープロセスが代わって実行するユーザーおよびグループ。</li>
      <li> 通常のWebサービスのTCPポート。</li>
      <li> WebAdminインターフェイスのTCPポート。 </li>
      <li> LiteSpeed PHPを設定するかどうか。
      <li> <span class="tag">[Enterpriseエディションのみ]</span> rootユーザーには、chrootを有効にするオプションがあります。
          インストーラは初期chroot環境を自動的に設定します。
          Chrootは高度な機能であり、設定調整なしでCGIが失敗する可能性があります。
          熟知していない限り、chrootを有効にしないことを強くお勧めします。
          後でアップグレードインストールを実行して、いつでも有効にすることができます。</li>
    </ol>
    <p>
    最後に、Web統計を追跡するためにAWStatsアドオンモジュールをインストールするかどうかを尋ねるインストーラが表示されます。
    ルートユーザーは、システム起動時にサービスとしてLiteSpeed Webサーバーを自動的に実行することもできます。
    そして完了です！
    インストーラはサーバを起動します。</p>
  </li>
</ol>
<h4>インストールのテスト</h4>
<ol>
<li> For detailed information on controlling the server processes,  
    please see the <a href="admin.html">Administration Guide</a>. To start the server, 
    simply run <span class="cmd">[your_install_dir]/bin/lswsctrl start</span>.
  </li>
  
  <li> To access your site, 
    point your browser to <span class="val">http://[address]:8088/</span>, 
    [address] being the IP address or domain name of your web server machine. 
    Use "localhost" if the server is on the machine you are using. 
    "8088" is the default port. If you changed the port 
    during installation, write the port you designated. A congratulations page 
    should load into the browser. If not, try the WebAdmin interface.
  </li>
  
  <li> The default port for the WebAdmin interface is 7080. Plug 
    <span class="val">http://[address]:7080/</span>, 
    into your browser to go to the WebAdmin interface. (If you changed 
    the port for WebAdmin during installation, use that port instead.) 
    Remember that for [address] you can use "localhost" if you're using the 
    machine the server is on. The administration interface welcome page should 
    load. Click the "Log on" link and use the administrator's username and 
    password specified during installation to log on. For detailed information 
    regarding configuration, please refer to our <a href="config.html">Configuration
    Guide</a>, or click the "help" link on top of each page. 
  </li>
  
  <li> If your server uses firewall, please make sure that localhost is trusted. 
    For instance, Linux with IPTables should include a rule <span class="cmd">ALLOW 
    INPUT from LO</span>.
    <br>
  </li>
  <li> If your web site and the WebAdmin interface are inaccessible, please take 
    a look at the error log - <span class="cmd">[your_install_dir]/logs/error.log 
    </span>
    <ul>
      <li> If there is a TCP port conflict with other server applications, 
        the web server should be reinstalled with an available port.<br>
        The following command can be used to find an available port:<br>
        <span class="cmd">netstat -an | grep XXXX</span><br>
        XXXX is a port number. If the port is available, the command will produce no 
        output.
      </li>
      <li> If the swapping directory is not writable, you can either 
        grant writing permission for the swapping directory to the user whom the web 
        server is running as, or change the swapping directory manually. The swapping 
        directory is configured in the server's XML configuration 
        file located at <span class="cmd">[your_install_dir]/conf/httpd_config.xml</span>, 
        default value is <span class="cmd">/tmp/lshttpd/swap</span>. Search for 
        <span class="cmd">&lt;swappingDir&gt;</span>.
      </li>
    </ul>
  </li>
</ol>
<p>If you still have problems with installation, please check out our 
<a href="http://www.litespeedtech.com/support/wiki">wiki</a> or post your problem 
on our support <a href="http://www.litespeedtech.com/support/forum/">forum</a>. </p>


<h3>Upgrading</h3>

<p>There are a few scenarios where you would need to update or upgrade the server:</p>

<ul>
<li>A new release is available</li>
<li>Upgrade from Standard Edition to Enterprise Edition</li>
<li>Upgrade from a trial license to production license</li>
<li>Upgrade/downgrade to a different production license.</li>
</ul>

<p>There are a number of ways to upgrade. One way is to just run install.sh again and select 
&quot;Upgrade&quot; when prompted. Your current configurations will be kept.</p>

<p>Starting with release 2.0, version management can also be done from the WebAdmin interface, 
under Actions - Version Management. All your installed versions and the available new releases 
are listed here. You can install a new release or switch between different versions by 
clicking the appropriate link. Since release 2.0, LSWS also features a built-in update agent 
that will check for new releases periodically and send email notifications.</p>

<p>Starting with release 4.1, you can upgrade to the latest release, force reinstall, or downgrade 
to an old version using the command line tool lsup.sh. See detailed usage information in 
<span class="cmd">[your_install_dir]/admin/misc/lsup.sh --help</span></p>

<p>Since release 1.5.6, multiple versions of LiteSpeed Web Server can be installed. 
    You can easily switch from one to another by using the version management utility: 
    <span class="cmd">[your_install_dir]/admin/misc/mgr_ver.sh</span>.</p> 
<ul><li>To switch to a version already installed, for example 1.5.6, just run <span class="cmd">[your_install_dir_current_version]/admin/misc/mgr_ver.sh 
        1.5.6</span></li>
 	<li>To remove previously installed files for a certain version, for example 1.5.6, 
        just run <span class="cmd">[your_install_dir_current_version]/admin/misc/mgr_ver.sh 
        -d 1.5.6</span> </li>
</ul>

<p>When upgrading your license (from trial to production license, for example), you can manually 
copy "serial.no" to the <span class="cmd">[your_install_dir]/conf/</span> 
directory, then restart. Please backup your old serial number and license key before restart.
</p>


<h3>License transfer procedure: </h3>

<p>Please be aware that each license key is associated with a serial number 
and the server's hardware signature. A new key is required if a change 
in hardware signature is detected. So if you upgrade or change your hardware, 
you need to transfer your current production license in order to continue using the product. </p>

<ol>
 <li> To migrate your current license, you can simply run the server binary 
  <span class="cmd">./lshttpd -m</span>. It will talk to LiteSpeed' products 
  registration server, unlock your serial number, and generate a temporary 
  license key. This temporary key is good for 3 days. This allows you a smooth 
  transition to the new server.</li>
<li> If you wish, you can take this chance to download the latest version of 
LiteSpeed Web Server to your new hardware. Then copy the serial number file "serial.no"
 to the installation directory and start up the Installer. You unlocked your serial 
 number in the previous step, so running the Installer will get you a new license key.</li>
 <li>If you wish to copy your old installation directory over to the new hardware, 
 then you just need to activate your license.
   Run command <span class="cmd">./lshttpd -r</span> to retrieve a new license key.</li>  
 <li>If the process fails, you can create a ticket with the license 
  department in the <a href="https://store.litespeedtech.com">client 
  area</a> of the online store. </li>
</ol>


<h3>Uninstallation Steps</h3>
<ol>
  <li>Simply run <span class="cmd">[your_install_dir]/admin/misc/uninstall.sh</span> 
    and follow the instructions on the screen.
  </li>
  <li>The Uninstaller will ask the following questions: 
    <ul>
      <li>whether to keep the log directory</li>
      <li>whether to keep the configuration directory</li>
    </ul>
    <br>
  </li>
  <li>Directories that were not created by the Installer will not be touched, 
    even if they are in [your_install_dir]. All the files created by the Installer 
    will be removed.
  </li>
  <li>[your_install_dir] will be removed as well, if it is empty. </li>
</ol>

