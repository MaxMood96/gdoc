<h1>インストール/アンインストール</h1>

<h3>最小システム要件</h3>
<ul><li><strong>オペレーティングシステム：</strong>
	<ul><li>Linux(i386): カーネル 2.4以上, glibc-2.2以上</li>
		<li>CentOS: 5以上</li>
		<li>Ubuntu: 8.04以上</li>
        <li>Debian: 4以上</li>
		<li>Solaris(x86): Sun0S 5.8以上</li>
		<li>FreeBSD(i386): 4.5以上</li>
		<li>MacOSX: 10.3以上</li>
	</ul></li>
	<li><strong>CPU:</strong>
		<ul><li>Intel: 80486以上</li>
			<li>PowerPC: PowerPC G4</li>
		</ul>
	</li>
	<li><strong>メモリ:</strong> 32MB以上</li>
	<li><strong>ディスク:</strong>
		<ul><li>インストール: 200MB</li><li>ランタイム: 300MB以上、スワップスペースは使用方法によって異なります。</li></ul></li>
</ul>

<h3>インストール</h3>

<p>インストールはコマンドライン端末で行う必要があります。 
   テストの目的で、LiteSpeed Web Serverは特権のないユーザーによってホームディレクトリにインストールできます。 
   プロダクション用には、システムディレクトリにインストールする必要があります。</p>

<p>Mac OS Xでは、rootユーザーはデフォルトで無効になっています。
<a href="http://support.apple.com/kb/PH11331">Apple</a>のウェブサイトに記載されている一連の操作を使用して有効にすることができます。
sudoコマンドを使用して、rootユーザーを有効にせずにLSWSをシステムディレクトリにインストールすることもできますが、システムフォルダはrootユーザーだけが操作できます。
つまり、コマンドライン端末からLSWSを制御したいとき（LSWSを起動または停止したいときなど）には、sudoコマンドを使用する必要があります。</p>

<h4>インストール手順：</h4>
<ol>

  <li> 便利な場所にパッケージを解凍する：<br>
    <span class="cmd">tar xvfz lsws-xxxx.tar.gz</span> 又は <span class="cmd">gunzip 
    -c lsws-xxxx.tar.gz | tar xvf -</span> <br>
  </li>
  <li><span class="tag">[Enterpriseエディションのみ]</span> トライアルライセンスキーまたはシリアル番号をインストールします：
    <ul>
      <li> トライアルライセンス： 
           <p>トライアルライセンスは評価のためのもので、ダウンロード後15日間有効です。
              トライアルライセンスは、ダウンロードページからリクエストできます。</p>
           <p>試用ライセンスキーが確認メールの添付ファイルとして送信されます。 
           添付ファイルを<span class="val">trial.key</span>として保存し、インストールディレクトリにコピーしてください。</p>
           <p>トライアルライセンスからプロダクションライセンスに切り替えるときは、以下の手順に従ってライセンスを更新するだけで、インストールスクリプトを再実行することができます。</p>
      </li>
      <li> プロダクションライセンス：
        <ol>
          <li> ライセンスはLiteSpeedの<a href="http://store.litespeedtech.com">ストアー</a>でリースまたは購入することができます 。</li>
          <li> 注文が正常に処理された後、確認メールでシリアル番号が送信されます。
               各シリアル番号により、1台のサーバーのインストールが可能です。</li>
          <li> シリアル番号を "serial.no"として保存します。 インストールディレクトリ（install.shが置かれている場所）にあります。
               LiteSpeed製品登録サーバーは、このファイルを使用して、インストールプロセス中にライセンスキーを取得します。</li>
        </ol>        
		</li>
    </ul>
  </li>
  <li> 
   <p>インストールディレクトリ<span class="cmd">cd lsws-xxxx</span>に移動し、<span class="cmd">./install.sh</span>コマンドを実行します。
    LiteSpeedのインストーラが起動します。</p>
    <p>このコマンドを &quot;root&quot;ユーザーとして実行するだけで、サーバーをシステムディレクトリにインストールできることに注意してください。
    他のユーザーは、ホームディレクトリの下のどこかにインストールする必要があります。</p>
    <p>Mac OS Xユーザーはコマンドを使用してサーバーをシステムディレクトリにインストールできます 
  <span class="cmd">sudo ./install.sh</span></p>
  </li>
  
  <li> エンドユーザー使用許諾契約書を読み、"Yes"と入力して契約を確認します。</li>
  
  <li>LiteSpeed Web Serverをインストールするディレクトリを指定します。
    rootユーザーの場合、デフォルトは/usr/local/lswsです。
    特権を持たないユーザーの場合、デフォルトはホームディレクトリです。 
    特権を持たないユーザーは、サーバーをシステムディレクトリにインストールすることはできません。</li>
   
  <li><span class="tag">[Enterpriseエディションのみ]</span> <strong>ライセンス要求を生成します。</strong>
    <p>インストーラがシリアル番号だけを検索し、有効なライセンスキーが見つからない場合は、ライセンス要求の生成を促します。
     インストーラはLiteSpeed製品登録サーバーと通信し、有効なライセンスキーを自動的に取得します。
     ライセンスキーを取得すると、次のステップに進みます。
     失敗した場合、インストーラは終了してライセンス要求ファイルを残します。</p>
    <p>自動処理が失敗した場合は、オンラインストアクライアントエリアのライセンス部門でチケットを作成することができます。</p>  
    <p>注：インストールは、有効な試用版ライセンスまたは有効なエンタープライズライセンスがある場合にのみ継続されます。 </p>
   </li>

    <li>画面の指示に従います。インストーラは、次の設定を要求します： 
    <ol>
      <li> 以前にインストールされたコピーが存在する場合、インストーラはアップグレード、再インストール、またはディレクトリの変更のいずれかを選択するように求めます。
           アップグレードすると、現在の設定が保持されます。</li>
      <li> WebAdminインターフェイスの管理者のユーザー名とパスワード。</li>
      <li> コントロールパネルがあればLSWSで使用。</li>
      <li> サーバープロセスが代わって実行するユーザーおよびグループ。</li>
      <li> 通常のWebサービスのTCPポート。</li>
      <li> WebAdminインターフェイスのTCPポート。 </li>
      <li> LiteSpeed PHPを設定するかどうか。
      <li> <span class="tag">[Enterpriseエディションのみ]</span> rootユーザーには、chrootを有効にするオプションがあります。
          インストーラは初期chroot環境を自動的に設定します。
          Chrootは高度な機能であり、設定調整なしでCGIが失敗する可能性があります。
          熟知していない限り、chrootを有効にしないことを強くお勧めします。
          後でアップグレードインストールを実行して、いつでも有効にすることができます。</li>
    </ol>
    <p>
    最後に、Web統計を追跡するためにAWStatsアドオンモジュールをインストールするかどうかを尋ねるインストーラが表示されます。
    ルートユーザーは、システム起動時にサービスとしてLiteSpeed Webサーバーを自動的に実行することもできます。
    そして完了です！
    インストーラはサーバを起動します。</p>
  </li>
</ol>
<h4>インストールのテスト</h4>
<ol>
<li> サーバープロセスの制御の詳細については、<a href="admin.html">管理ガイド</a>を参照してください。
サーバーを起動するには、<span class="cmd">[your_install_dir]/bin/lswsctrl start</span>を実行するだけです。
  </li>
  
  <li> サイトにアクセスするには、
    ブラウザで<span class="val">http：//[address]：8088/</span>にアクセスし、[address]はWebサーバーマシンのIPアドレスまたはドメイン名を指定します。
    サーバーが使用しているマシン上にある場合は、「localhost」を使用します。
    "8088"がデフォルトのポートです。
    インストール時にポートを変更した場合は、指定したポートに書き込んでください。
    おめでとうページがブラウザに読み込まれます。
    そうでない場合は、WebAdminインターフェイスを試してください。
  </li>
  
  <li> WebAdminインターフェイスの既定のポートは7080です。
   <span class="val">http：//[address]：7080/</span>をブラウザーに差し込み、WebAdminインターフェイスに移動します。
  （インストール中にWebAdminのポートを変更した場合は、代わりにそのポートを使用してください）。
   サーバーが稼働しているマシンを使用している場合は、[アドレス]には "localhost"を使用できます。
   管理インターフェースのウェルカムページが読み込まれます。
   [ログオン]リンクをクリックし、インストール時に指定した管理者のユーザー名とパスワードを使用してログオンします。 
   設定に関する詳細については、<a href="config.html">設定ガイド</a>を参照するか、各ページの上部にある"ヘルプ"リンクをクリックしてください。
  </li>
  
  <li> サーバーがファイアウォールを使用している場合は、localhostが信頼できるものであることを確認してください。
      たとえば、IPTablesを持つLinuxには、<span class="cmd">LOからのALLOW INPUT</span>というルールを含める必要があります。
    <br>
  </li>
  <li> WebサイトとWebAdminインターフェイスにアクセスできない場合は、エラーログ<span class="cmd">[your_install_dir]/logs/error.log</span>を見てください。
    <ul>
      <li> TCPポートが他のサーバアプリケーションと競合している場合は、使用可能なポートを使用してWebサーバを再インストールする必要があります。<br>
        次のコマンドを使用して、使用可能なポートを見つけることができます。<br>
        <span class="cmd">netstat -an | grep XXXX</span> <br>
        XXXXはポート番号です。ポートが使用可能な場合、コマンドは出力を生成しません。
      </li>
      <li> スワッピングディレクトリが書き込み可能でない場合は、スワッピングディレクトリの書き込み権限をWebサーバーが実行されているユーザーに許可するか、スワップディレクトリを手動で変更します。
        スワッピングディレクトリは、<span class="cmd">[<your_install_dir]/conf/httpd_config.xml</span>にあるサーバーのXML構成ファイルで構成されます。
        デフォルト値は<span class="cmd">/tmp/lshttpd/swap</span>です。
        <span class="cmd">&lt;swappingDir&gt;</span>を検索します。
      </li>
    </ul>
  </li>
</ol>
<p>引き続きインストールに問題がある場合は、<a href="http://www.litespeedtech.com/support/wiki">wiki</a>を確認するか、問題を当社のサポート<a href="http：//www.litespeedtech.com/support/forum/">フォーラム</a>をご覧ください。
</p>


<h3>アップグレード</h3>

<p>サーバーを更新またはアップグレードする必要があるシナリオがいくつかあります：</p>

<ul>
<li>新しいリリースが利用可能</li>
<li>StandardエディションからEnterpriseエディションへのアップグレード</li>
<li>トライアルライセンスからプロダクションライセンスへのアップグレード</li>
<li>別のプロダクションライセンスへのアップグレード/ダウングレード</li>
</ul>

<p>アップグレードするにはいくつかの方法があります。
1つの方法は、install.shをもう一度実行し、プロンプトが表示されたら＆quot;アップグレード＆quot;を選択することです。 
あなたの現在の設定は保持されます。</p>

<p>リース2.0以降、WebAdminインターフェイスのアクション - バージョン管理でバージョン管理を行うこともできます。
インストールされているすべてのバージョンと利用可能な新しいリリースがここにリストされています。
新しいリリースをインストールするか、適切なリンクをクリックして異なるバージョン間で切り替えることができます。
リリース2.0以降、LSWSには、定期的に新しいリリースを確認し、電子メール通知を送信するビルトインアップデートエージェントも搭載されています</p>

<p>リリース4.1から、コマンドラインツールlsup.shを使用して、最新リリースにアップグレードしたり、強制的に再インストールしたり、古いバージョンにダウングレードすることができます。
詳細な使用方法については 
<span class="cmd">[your_install_dir]/admin/misc/lsup.sh --help</span></p>

<p>リリース1.5.6以降、複数バージョンのLiteSpeed Web Serverをインストールできます。
  バージョン管理ユーティリティを使用すると、簡単に切り替えることができます： 
    <span class="cmd">[your_install_dir]/admin/misc/mgr_ver.sh</span>.</p> 
<ul><li>すでにインストールされているバージョン、例えば1.5.6などに切り替えるには、<span class="cmd"> [your_install_dir_current_version]/admin/misc/mgr_ver.sh 1.5.6 </span>を実行するだけです。</li>
 	<li>以前にインストールされた特定のバージョンのファイルを削除するには、
<span class="cmd">[your_install_dir_current_version]/admin/misc/mgr_ver.sh -d 1.5.6</span>を実行するだけです。</li>
</ul>

<p>ライセンスをトライアルからプロダクションライセンスにアップグレードする場合は、手動で "serial.no"を<span class="cmd"> [your_install_dir]/conf/</span>ディレクトリにコピーして再起動します。
再起動する前に、古いシリアル番号とライセンスキーをバックアップしてください。
</p>


<h3>ライセンス転送手順：</h3>

<p>各ライセンスキーには、シリアル番号とサーバーのハードウェア署名が関連付けられています。
ハードウェア署名の変更が検出された場合は、新しいキーが必要です。
したがって、ハードウェアをアップグレードまたは変更する場合は、引き続き製品を使用するために現在のプロダクションライセンスを転送する必要があります。</p>

<ol>
 <li> 現在のライセンスを移行するには、サーババイナリ<span class="cmd">./lshttpd -m </span>を実行するだけです。
LiteSpeedの製品登録サーバーと通信し、シリアル番号をロック解除し、一時ライセンスキーを生成します。
この一時的なキーは3日間有効です。
これにより、新しいサーバーへのスムーズな移行が可能になります。</li>
<li> 必要に応じて、この機会に新しいバージョンのLiteSpeed Web Serverを新しいハードウェアにダウンロードすることができます。
次にシリアル番号ファイル "serial.no"をインストールディレクトリにコピーし、インストーラを起動します。
前の手順でシリアル番号のロックを解除したため、インストーラを実行すると新しいライセンスキーが取得されます。</li>
 <li>古いインストールディレクトリを新しいハードウェアにコピーする場合は、ライセンスをアクティブ化するだけです。
  コマンド<span class="cmd">./lshttpd -r </span>を実行して、新しいライセンスキーを取得します。</li>  
 <li>プロセスが失敗した場合は、オンラインストアの<a href="https://store.litespeedtech.com">クライアントエリア</a>にライセンス部門のチケットを作成できます。</li>
</ol>


<h3>アンインストール手順</h3>
<ol>
  <li><span class="cmd">[your_install_dir]/admin/misc/uninstall.sh</span>を実行し、画面の指示に従います。<br> 
  </li>
  <li>アンインストーラは、次の質問をします： 
    <ul>
      <li>ログディレクトリを保持するかどうか</li>
      <li>設定ディレクトリを保持するかどうか</li>
    </ul>
    <br>
  </li>
  <li>インストーラによって作成されなかったディレクトリは、[your_install_dir]にあっても変更されません。
      インストーラによって作成されたすべてのファイルは削除されます。<br>
  </li>
  <li>[your_install_dir]も空であれば削除されます。</li>
</ol>

